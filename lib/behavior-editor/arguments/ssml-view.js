"use strict";var e=function(e){return e&&e.__esModule?e["default"]:e},t=e(require("react")),n=e(require("../../toolbar/run-configuration")),o=atom.grammars.getGrammars(),s=void 0;o.forEach(function(e){"XML"===e.name&&(s=e)});var i=t.createClass({displayName:"SSMLView",onMouseDown:function(){var e=this,o=t.findDOMNode(this.refs.editor),s=o.getModel();if(!this.speaking){var i={duration_stretch:1,locale:"en-us",mode:"text",outputMode:"stream",pitch:.42,pitchBandwidth:.25,prompt:s.getText(),voice:"griffin"},a="http://"+n.host+":8089/";this.speaking=!0,this._send(""+a+"tts_stop","GET",{},function(){e._send(""+a+"tts_speak","POST",i,function(){e.speaking=!1})})}},_send:function(e,t,n,o){var s=new XMLHttpRequest;s.open(t,e,!0),s.onreadystatechange=function(){4!=s.readyState||204!==s.status&&200!==s.status?4==s.readyState&&0==s.status&&o():o()},s.send(JSON.stringify(n))},render:function(){return t.createElement("div",null,t.createElement("atom-text-editor",{ref:"editor",style:{height:200,width:"100%"}},this.props.content),t.createElement("div",{className:"block"},t.createElement("button",{onMouseDown:this.onMouseDown,className:"btn inline-block-tight"},t.createElement("i",{"class":"fa fa-volume-up"}),"Test Speech")))},componentDidMount:function(){var e=this;this.speaking=!1;var n=t.findDOMNode(this.refs.editor),o=n.getModel();o.setGrammar(s),this.disposable=o.onDidChange(function(){e.props.onChange(o.getText())})},componentWillUnmount:function(){this.disposable&&this.disposable.dispose()}});module.exports=function(e,n,o){return t.createElement(i,{key:n,content:e,onChange:o})};