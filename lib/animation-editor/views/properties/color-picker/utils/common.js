"use strict";function t(){}var i=function(t){return t&&t.__esModule?t["default"]:t},e=i(require("region")),n=i(require("drag-helper")),o=require("./color").toHsv;module.exports={toColorValue:function(t){return"string"==typeof t?o(t):{h:t.h,s:t.s,v:t.v,a:t.a}},onMouseDown:function(t){t.preventDefault();var i=e.fromDOM(this.getDOMNode()),o=this.getEventInfo(t,i);n(t,{scope:this,constrainTo:i,onDragStart:function(t,e){e.initialPoint=o,e.minLeft=0,e.maxLeft=i.width,this.handleDragStart(t)},onDrag:function(t,e){var n=this.getEventInfo(t,i);this.updateColor(n),this.handleDrag(t,e)},onDrop:function(t,e){var n=this.getEventInfo(t,i);this.updateColor(n),this.handleDrop(t,e)}}),this.updateColor(o),this.handleMouseDown(t,{initialPoint:o})},handleMouseDown:function(i,e){(this.props.onMouseDown||t).apply(this,this.getColors()),this.handleDrag(i,e)},handleUpdate:function(t,i){var e=i.diff||{top:0,left:0},n=i.initialPoint;if(n){var o,s;s=n.x+e.left,o=n.y+e.top,s=Math.max(s,i.minLeft),s=Math.min(s,i.maxLeft),this.state.top=o,this.state.left=s,this.state.mouseDown={x:s,y:o,width:n.width,height:n.height}}this.props.inPicker||this.props.value||this.setState({value:this.hsv})},handleDragStart:function(){},handleDrag:function(i,e){this.handleUpdate(i,e),(this.props.onDrag||t).apply(this,this.getColors())},handleDrop:function(i,e){this.handleUpdate(i,e),this.state.mouseDown=!1,(this.props.onChange||t).apply(this,this.getColors())},getColors:function(){var t=this.props.inPicker?this.hsv:this.toStringValue(this.hsv),i=[t];return this.props.inPicker||i.push(Object.assign({},this.hsv)),i},getEventInfo:function(t,i){i=i||e.fromDOM(this.getDOMNode());var n=t.clientX-i.left,o=t.clientY-i.top;return{x:n,y:o,width:i.getWidth(),height:i.getHeight()}}};