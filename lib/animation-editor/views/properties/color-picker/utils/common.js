"use strict";function t(){}var e=function(t){return t&&t.__esModule?t["default"]:t},i=e(require("region")),o=e(require("object-assign")),n=e(require("drag-helper")),s=require("./color").toHsv;module.exports={toColorValue:function(t){return"string"==typeof t?s(t):{h:t.h,s:t.s,v:t.v,a:t.a}},onMouseDown:function(t){t.preventDefault();var e=i.fromDOM(this.getDOMNode()),o=this.getEventInfo(t,e);n(t,{scope:this,constrainTo:e,onDragStart:function(t,i){i.initialPoint=o,i.minLeft=0,i.maxLeft=e.width,this.handleDragStart(t)},onDrag:function(t,i){var o=this.getEventInfo(t,e);this.updateColor(o),this.handleDrag(t,i)},onDrop:function(t,i){var o=this.getEventInfo(t,e);this.updateColor(o),this.handleDrop(t,i)}}),this.updateColor(o),this.handleMouseDown(t,{initialPoint:o})},handleMouseDown:function(e,i){(this.props.onMouseDown||t).apply(this,this.getColors()),this.handleDrag(e,i)},handleUpdate:function(t,e){var i=e.diff||{top:0,left:0},o=e.initialPoint;if(o){var n,s;s=o.x+i.left,n=o.y+i.top,s=Math.max(s,e.minLeft),s=Math.min(s,e.maxLeft),this.state.top=n,this.state.left=s,this.state.mouseDown={x:s,y:n,width:o.width,height:o.height}}this.props.inPicker||this.props.value||this.setState({value:this.hsv})},handleDragStart:function(){},handleDrag:function(e,i){this.handleUpdate(e,i),(this.props.onDrag||t).apply(this,this.getColors())},handleDrop:function(e,i){this.handleUpdate(e,i),this.state.mouseDown=!1,(this.props.onChange||t).apply(this,this.getColors())},getColors:function(){var t=this.props.inPicker?this.hsv:this.toStringValue(this.hsv),e=[t];return this.props.inPicker||e.push(o({},this.hsv)),e},getEventInfo:function(t,e){e=e||i.fromDOM(this.getDOMNode());var o=t.clientX-e.left,n=t.clientY-e.top;return{x:o,y:n,width:e.getWidth(),height:e.getHeight()}}};