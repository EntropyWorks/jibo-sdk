"use strict";var e=function(){function e(e,t){for(var o in t){var n=t[o];n.configurable=!0,n.value&&(n.writable=!0)}Object.defineProperties(e,t)}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),t=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},o=require("jibo-keyframes").conversion,n=function(){function n(e,o,i){t(this,n),this.renderer=e,this.animationModel=o,this.layerType=i?"Overlay":"Eye";var a=i?"overlay_textureSubRootBn":"eyeSubRootBn",r=e.scene.getScene();this.rootBone=r.getObjectByName(a),this.prefix=i?"overlay_vertexJoint":"vertexJoint",this.vertices={};for(var s=1;10>s;s++){var h=""+this.prefix+s,l=r.getObjectByName(h);this.vertices[h]=l}this.onDataChangedBind=this.onDataChanged.bind(this),this.animationModel.on("ondatachanged",this.onDataChangedBind),this.onDataChanged()}return e(n,{onDataChanged:{value:function(){var e=this,t=this.animationModel.evaluateAllLayersFiltered(function(t){return t.type===e.layerType})[this.layerType];t=t?t:this.animationModel.getDefaultPropsForLayerType(this.layerType);for(var n=1;10>n;n++){var i=t["Vertex "+n],a=""+this.prefix+n,r=this.vertices[a];r.position.x=o.toMetersX(i.x),r.position.y=o.toMetersY(i.y)}this.rootBone.position.x=o.toMetersX(t.Translate.x),this.rootBone.position.y=o.toMetersY(t.Translate.y),this.rootBone.scale.x=t.Scale.x,this.rootBone.scale.y=t.Scale.y,this.rootBone.rotation.z=t.Rotate*Math.PI/180}},dispose:{value:function(){this.animationModel.removeListener("ondatachanged",this.onDataChangedBind)}}}),n}();module.exports=n;